<!DOCTYPE html>
<html lang="en">
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>


  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Economic Development: Africa</title>
  <meta name="description" content="                        Economic Models, Fall 2019            Dr. Eric Van Dusen">

  <link rel="canonical" href="https://ds-connectors.github.io/econ-models-textbook/development/development.html">
  <link rel="alternate" type="application/rss+xml" title="Data 88: Economic Models" href="https://ds-connectors.github.io/econ-models-textbook/feed.xml">

  <meta property="og:url"         content="https://ds-connectors.github.io/econ-models-textbook/development/development.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Economic Development: Africa" />
<meta property="og:description" content="                        Economic Models, Fall 2019            Dr. Eric Van Dusen" />
<meta property="og:image"       content="" />


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage":
    "https://ds-connectors.github.io/econ-models-textbook/development/development.html",
  "headline":
    "Economic Development: Africa",
  "datePublished":
    "2020-01-09T16:59:14-08:00",
  "dateModified":
    "2020-01-09T16:59:14-08:00",
  "description":
    "                        Economic Models, Fall 2019            Dr. Eric Van Dusen",
  "author": {
    "@type": "Person",
    "name": "Eric Van Dusen et al."
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ds-connectors.github.io/econ-models-textbook",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://ds-connectors.github.io/econ-models-textbook",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/econ-models-textbook/assets/css/styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css ">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/econ-models-textbook/images/favicon.ico">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    CommonHTML: {
        linebreaks: {
            automatic: true,
        },
    },
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML' async></script>

  <!-- DOM updating function -->
  <script>
const runWhenDOMLoaded = cb => {
  if (document.readyState != 'loading') {
    cb()
  } else if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', cb)
  } else {
    document.attachEvent('onreadystatechange', function() {
      if (document.readyState == 'complete') cb()
    })
  }
}

// Helper function to init things quickly
initFunction = function(myfunc) {
  runWhenDOMLoaded(myfunc);
  document.addEventListener('turbolinks:load', myfunc);
};
</script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '/econ-models-textbook';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="/econ-models-textbook/assets/js/anchor.min.js"  type="text/javascript"></script>
  <script>

initFunction(function () {
    anchors.add("main h1, main h2, main h3, main h4")
});

</script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="/econ-models-textbook/assets/js/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->



  <!-- Load the auto-generating TOC -->
  <script src="/econ-models-textbook/assets/js/tocbot.min.js"  type="text/javascript"></script>
  <script>
var initToc = function () {
  tocbot.init({
    tocSelector: 'nav.onthispage',
    contentSelector: '.c-textbook__content',
    headingSelector: 'h2, h3',
    orderedList: false,
    collapseDepth: 6,
    listClass: 'toc__menu',
    activeListItemClass: "",  // Not using
    activeLinkClass: "", // Not using
  });
  tocbot.refresh();
}
initFunction(initToc);
</script>

  <!-- Google analytics -->
  <script src="/econ-models-textbook/assets/js/ga.js" async></script>

  <!-- Clipboard copy button -->
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" async></script>

  <!-- Load JS that depends on site variables -->
  <script>
/**
 * Set up copy/paste for code blocks
 */
const codeCellId = index => `codecell${index}`

const clipboardButton = id =>
  `<a id="copy-button-${id}" class="btn copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#${id}">
    <img src="/econ-models-textbook/assets/images/copy-button.svg" alt="Copy to clipboard">
  </a>`

// Clears selected text since ClipboardJS will select the text when copying
const clearSelection = () => {
  if (window.getSelection) {
    window.getSelection().removeAllRanges()
  } else if (document.selection) {
    document.selection.empty()
  }
}

// Changes tooltip text for two seconds, then changes it back
const temporarilyChangeTooltip = (el, newText) => {
  const oldText = el.getAttribute('data-tooltip')
  el.setAttribute('data-tooltip', newText)
  setTimeout(() => el.setAttribute('data-tooltip', oldText), 2000)
}

const addCopyButtonToCodeCells = () => {
  // If ClipboardJS hasn't loaded, wait a bit and try again. This
  // happens because we load ClipboardJS asynchronously.
  if (window.ClipboardJS === undefined) {
    setTimeout(addCopyButtonToCodeCells, 250)
    return
  }

  const codeCells = document.querySelectorAll('div.c-textbook__content > div.highlighter-rouge > div.highlight > pre, div.input_area pre')
  codeCells.forEach((codeCell, index) => {
    const id = codeCellId(index)
    codeCell.setAttribute('id', id)
    if (document.getElementById("copy-button" + id) == null) {
      codeCell.insertAdjacentHTML('afterend', clipboardButton(id));
    }
  })

  const clipboard = new ClipboardJS('.copybtn')
  clipboard.on('success', event => {
    clearSelection()
    temporarilyChangeTooltip(event.trigger, 'Copied!')
  })

  clipboard.on('error', event => {
    temporarilyChangeTooltip(event.trigger, 'Failed to copy')
  })

  // Get rid of clipboard before the next page visit to avoid memory leak
  document.addEventListener('turbolinks:before-visit', () =>
    clipboard.destroy()
  )
}

initFunction(addCopyButtonToCodeCells);
</script>


  <!-- Hide cell code -->
  <script>
    /**
    Add buttons to hide code cells
    */


    var setCodeCellVisibility = function (inputField, kind) {
        // Update the image and class for hidden
        var id = inputField.getAttribute('data-id');
        var codeCell = document.querySelector(`#${id} div.highlight`);

        if (kind === "visible") {
            codeCell.classList.remove('hidden');
            inputField.checked = true;
        } else {
            codeCell.classList.add('hidden');
            inputField.checked = false;
        }
    }

    var toggleCodeCellVisibility = function (event) {
        // The label is clicked, and now we decide what to do based on the input field's clicked status
        if (event.target.tagName === "LABEL") {
            var inputField = event.target.previousElementSibling;
        } else {
            // It is the span inside the target
            var inputField = event.target.parentElement.previousElementSibling;
        }

        if (inputField.checked === true) {
            setCodeCellVisibility(inputField, "visible");
        } else {
            setCodeCellVisibility(inputField, "hidden");
        }
    }


    // Button constructor
    const hideCodeButton = id => `<input class="hidebtn" type="checkbox" id="hidebtn${id}" data-id="${id}"><label title="Toggle cell" for="hidebtn${id}" class="plusminus"><span class="pm_h"></span><span class="pm_v"></span></label>`

    var addHideButton = function () {
        // If a hide button is already added, don't add another
        if (document.querySelector('div.hidecode input') !== null) {
            return;
        }

        // Find the input cells and add a hide button
        document.querySelectorAll('div.input_area').forEach(function (item, index) {
            if (!item.classList.contains("hidecode")) {
                // Skip the cell if it doesn't have a hidecode class
                return;
            }

            const id = codeCellId(index)
            item.setAttribute('id', id);
            // Insert the button just inside the end of the next div
            item.querySelector('div').insertAdjacentHTML('beforeend', hideCodeButton(id))

            // Set up the visibility toggle
            hideLink = document.querySelector(`#${id} div.highlight + input + label`);
            hideLink.addEventListener('click', toggleCodeCellVisibility)
        });
    }


    // Initialize the hide buttos
    var initHiddenCells = function () {
        // Add hide buttons to the cells
        addHideButton();

        // Toggle the code cells that should be hidden
        document.querySelectorAll('div.hidecode input').forEach(function (item) {
            setCodeCellVisibility(item, 'hidden');
            item.checked = true;
        })
    }

    initFunction(initHiddenCells);

</script>

  <!-- Load custom website scripts -->
  <script src="/econ-models-textbook/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/econ-models-textbook/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/econ-models-textbook/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  
<script>
/**
  * To auto-embed hub URLs in interact links if given in a RESTful fashion
 */

function getJsonFromUrl(url) {
  var query = url.split('?');
  if (query.length < 2) {
    // No queries so just return false
    return false;
  }
  query = query[1];
  // Collect REST params into a dictionary
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}
    
function dict2param(dict) {
    params = Object.keys(dict).map(function(k) {
        return encodeURIComponent(k) + '=' + encodeURIComponent(dict[k])
    });
    return params.join('&')
}

// Parse a Binder URL, converting it to the string needed for JupyterHub
function binder2Jupyterhub(url) {
  newUrl = {};
  parts = url.split('v2/gh/')[1];
  // Grab the base repo information
  repoinfo = parts.split('?')[0];
  var [org, repo, ref] = repoinfo.split('/');
  newUrl['repo'] = ['https://github.com', org, repo].join('/');
  newUrl['branch'] = ref
  // Grab extra parameters passed
  params = getJsonFromUrl(url);
  if (params['filepath'] !== undefined) {
    newUrl['subPath'] = params['filepath']
  }
  return dict2param(newUrl);
}

// Filter out potentially unsafe characters to prevent xss
function safeUrl(url)
{
   return String(encodeURIComponent(url))
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
}

function addParamToInternalLinks(hub) {
  var links = document.querySelectorAll("a").forEach(function(link) {
    var href = link.href;
    // If the link is an internal link...
    if (href.search("https://ds-connectors.github.io") !== -1 || href.startsWith('/') || href.search("127.0.0.1:") !== -1) {
      // Assume we're an internal link, add the hub param to it
      var params = getJsonFromUrl(href);
      if (params !== false) {
        // We have REST params, so append a new one
        params['jupyterhub'] = hub;
      } else {
        // Create the REST params
        params = {'jupyterhub': hub};
      }
      // Update the link
      var newHref = href.split('?')[0] + '?' + dict2param(params);
      link.setAttribute('href', decodeURIComponent(newHref));
    }
  });
  return false;
}


// Update interact links
function updateInteractLink() {
    // hack to make this work since it expects a ? in the URL
    rest = getJsonFromUrl("?" + location.search.substr(1));
    jupyterHubUrl = rest['jupyterhub'];
    var hubType = null;
    var hubUrl = null;
    if (jupyterHubUrl !== undefined) {
      hubType = 'jupyterhub';
      hubUrl = jupyterHubUrl;
    }

    if (hubType !== null) {
      // Sanitize the hubUrl
      hubUrl = safeUrl(hubUrl);

      // Add HTTP text if omitted
      if (hubUrl.indexOf('http') < 0) {hubUrl = 'http://' + hubUrl;}
      var interactButtons = document.querySelectorAll("button.interact-button")
      var lastButton = interactButtons[interactButtons.length-1];
      var link = lastButton.parentElement;

      // If we've already run this, skip the link updating
      if (link.nextElementSibling !== null) {
        return;
      }

      // Update the link and add context div
      var href = link.getAttribute('href');
      if (lastButton.id === 'interact-button-binder') {
        // If binder links exist, we need to re-work them for jupyterhub
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // If localhost, assume we're working from a local Jupyter server and remove `/hub`
          first = [hubUrl, 'git-sync'].join('/')
        } else {
          first = [hubUrl, 'hub', 'user-redirect', 'git-sync'].join('/')
        }
        href = first + '?' + binder2Jupyterhub(href);
      } else {
        // If interact button isn't binderhub, assume it's jupyterhub
        // If JupyterHub links, we only need to replace the hub url
        href = href.replace("https://datahub.berkeley.edu", hubUrl);
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // Assume we're working from a local Jupyter server and remove `/hub`
          href = href.replace("/hub/user-redirect", "");
        }
      }
      link.setAttribute('href', decodeURIComponent(href));

      // Add text after interact link saying where we're launching
      hubUrlNoHttp = decodeURIComponent(hubUrl).replace('http://', '').replace('https://', '');
      link.insertAdjacentHTML('afterend', '<div class="interact-context">on ' + hubUrlNoHttp + '</div>');

      // Update internal links so we retain the hub url
      addParamToInternalLinks(hubUrl);
    }
}

runWhenDOMLoaded(updateInteractLink)
document.addEventListener('turbolinks:load', updateInteractLink)
</script>


  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="/econ-models-textbook/assets/js/lunr/lunr.min.js" type="text/javascript"></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>
</head>

  <body>
    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://ds-connectors.github.io/econ-models-textbook"><img src="/econ-models-textbook/images/econ-models.png" class="textbook_logo" id="sidebar-logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">Data 88: Economic Models</h2>
  <ul class="c-sidebar__chapters">
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/intro.html"
        >
          
          Home
        </a>

        
      </li>

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/sympy-latex.html"
        >
          
            1.
          
          SymPy and LaTeX
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/sympy-latex/sympy-latex.html"
                >
                  
                  SymPy and LaTeX
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/supply.html"
        >
          
            2.
          
          Supply and Firm Behavior
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/supply/horizontal-sum-supply.html"
                >
                  
                  Horizontal Sum Supply
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/supply/production.html"
                >
                  
                  Production
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/supply/supply.html"
                >
                  
                  Supply and Firm Behavior
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/demand.html"
        >
          
            3.
          
          Demand and Market Equilibrium
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/demand/demand.html"
                >
                  
                  Demand and Market Equilibrium
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/utility.html"
        >
          
            4.
          
          Utility Maximization
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/utility/utility.html"
                >
                  
                  Utility Maximization
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/elasticities.html"
        >
          
            5.
          
          Welfare and Elasticities
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/elasticities/elasticities.html"
                >
                  
                  Welfare and Elasticities
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/trade.html"
        >
          
            6.
          
          Trade and Taxes
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/trade/trade.html"
                >
                  
                  Trade and Taxes
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/production.html"
        >
          
            7.
          
          Production and Cobb-Douglas
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/production/production.html"
                >
                  
                  Production and Cobb-Douglas
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/development.html"
        >
          
            8.
          
          Economic Development: Africa
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections ">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry c-sidebar__entry--active"
                  href="/econ-models-textbook/development/development.html"
                >
                  
                  Economic Development: Africa
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/finance.html"
        >
          
            9.
          
          Finance and Time Series Data
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/finance/finance.html"
                >
                  
                  Finance and Time Series Data
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/inequality.html"
        >
          
            10.
          
          Inequality and Tax Rates
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/inequality/inequality.html"
                >
                  
                  Inequality and Tax Rates
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/envecon.html"
        >
          
            11.
          
          Environmental Economics
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/envecon/envecon.html"
                >
                  
                  Environmental Economics
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/econ-models-textbook/topic-intros/Econometrics.html"
        >
          
            12.
          
          Econometrics and Data Science
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/econometrics/econometrics.html"
                >
                  
                  Econometrics and Data Science
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/econ-models-textbook/econometrics/dummy-variables.html"
                >
                  
                  Dummy Variables
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
  </ul>
  <p class="sidebar_footer">Powered by <a href="https://github.com/jupyter/jupyter-book">Jupyter Book</a></p>
</nav>

      
      <!-- Empty sidebar placeholder that we'll auto-fill with javascript -->
      <aside class="sidebar__right">
          <header><h4 class="nav__title"><i class="fa fa-list"></i>   On this page</h4></header>
          <nav class="onthispage">
          </nav>
      </aside>
      
      <main class="c-textbook__page" tabindex="-1">
          <div class="o-wrapper">
            <div class="c-sidebar-toggle">
  <!-- We show the sidebar by default so we use .is-active -->
  <button
    id="js-sidebar-toggle"
    class="hamburger hamburger--arrowalt is-active"
  >
    <span class="hamburger-box">
      <span class="hamburger-inner"></span>
    </span>
    <span class="c-sidebar-toggle__label">Toggle Sidebar</span>
  </button>
</div>

            
<div class="buttons">










<a href="https://mybinder.org/v2/gh/ds-connectors/econ-models-textbook/master?filepath=content%2Fdevelopment%2Fdevelopment.ipynb"><button class="interact-button" id="interact-button-binder"><img class="interact-button-logo" src="/econ-models-textbook/assets/images/logo_binder.svg" alt="Interact" />Binder</button></a>






<a href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com//ds-connectors/econ-models-textbook&amp;branch=master&amp;subPath=content%2Fdevelopment%2Fdevelopment.ipynb&amp;app=notebook"><button class="interact-button" id="interact-button-jupyterhub"><img class="interact-button-logo" src="/econ-models-textbook/assets/images/logo_jupyterhub.svg" alt="Interact" />UCB Datahub</button></a>



</div>


            <div class="c-textbook__content">
              <table style="width: 100%;">
    <tr style="background-color: transparent;"><td>
        <img src="https://d8a-88.github.io/econ-fa19/assets/images/blue_text.png" width="250px" style="margin-left: 0;" />
    </td><td>
        <p style="text-align: right; font-size: 12pt;"><strong>Economic Models</strong>, Fall 2019<br />
            Dr. Eric Van Dusen</p></td></tr>
</table>

<h1 id="lab-8-water-guard-promotion-study">Lab 8: Water Guard Promotion Study</h1>

<p>This lab is an adaptation from a set of notebooks developed for a full semester Data Science Connector Course taught in Fall 2017, entitled “Behind the Curtain in Economic Development”.  This dataset come from a randomized controlled trial household survey carried out in Eastern Kenya in 2007 - 2008.</p>

<p>The purpose of the study was to understand how to promote the use of WaterGuard, a dilute sodium hypochlorite solution that was promoted for Point-of-use household water disinfection.  There were seven arms in the study - which will be more fully described in the following Table:</p>

<p><img src="Slide1.png" /></p>

<p>Within this table you can see the seven treatments arms -  control plus three treatments -  in the bolded boxes in the middle with the number of springs and households. The study was carried out as a part of a study of households who gather drinking water from springs in a rural area.  The three boxes at the bottom describe the three rounds of data collection - a baseline before the treatment, and a short term and long term follow-up.</p>

<p><strong>Notebook Outline</strong></p>

<ol>
  <li><a href="#Mapping">Mapping</a></li>
  <li><a href="#Balance">Balance Check</a></li>
  <li><a href="#Baseline">Baseline and a Randomly Selected Compound</a></li>
  <li><a href="#Chlorine">Chlorine Usage outcome variables</a></li>
  <li><a href="#Graph">Graph of outcomes by Treatment Arm</a></li>
</ol>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datascience</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">read_stata</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! jupyter labextension install @jupyter-widgets/jupyterlab-manager</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! pip install gmaps</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! jupyter lab build</span>


</code></pre></div>    </div>
  </div>

</div>

<h1 id="mapping">Mapping</h1>

<div id="Mapping"></div>

<p>This first section works with a package in Jupyter called Gmaps, 
the documentation is <a href="http://jupyter-gmaps.readthedocs.io/en/latest/gmaps.html">here</a>
and it is worth a short read through if you are interested</p>

<p>For Data 8 users, a basic mapping program is included in the datascience module
it is called Folium and makes open source maps from python data
the documentation is <a href="http://folium.readthedocs.io/en/latest/index.html">here</a></p>

<p>In rural Kenya there are few roads and very limited coverage with Open Street Map base layer that works in Folium.  Therefore we will use the satellite layer which is avialable from Google Maps.</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># if you want to run this on a local machine you may need to do the following</span>
<span class="c"># at the terminal prompt need to do $ pip install gmaps</span>
<span class="c"># at the terminal prompt need to do $ jupyter nbextension enable --py gmaps</span>
<span class="c"># may have to quite jupyter and restart terminal and then do the above prompt</span>
<span class="c"># need a GMAPS API token  - mine is (new Nov 2018)  AIzaSyCw6FrENSBnz8T_dHRiPSaNw299bIuYA-g</span>
<span class="c"># This code is following along from http://jupyter-gmaps.readthedocs.io/en/latest/gmaps.html</span>

<span class="kn">import</span> <span class="nn">gmaps</span>
<span class="kn">import</span> <span class="nn">gmaps.datasets</span>
<span class="n">gmaps</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s">"AIzaSyCw6FrENSBnz8T_dHRiPSaNw299bIuYA-g"</span><span class="p">)</span> <span class="c"># Fill in with your API key</span>

</code></pre></div>    </div>
  </div>

</div>

<p>We will start by reading in a dataset of the GPS coordinates of the springs that are used in the WaterGuard Promotion (WGP) study.  These springs were randomized into seven different treatment arms.  The springs are identified by a unique numerical id tag, and the common name in the local language.</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">springsGPS</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s">'WGPgps_forData8.csv'</span><span class="p">)</span>
<span class="n">springsGPS</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#make a table with just the North and East Gps columns </span>

<span class="n">locations</span> <span class="o">=</span> <span class="n">springsGPS</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"gpsn1"</span><span class="p">,</span> <span class="s">"gpse1"</span><span class="p">)</span>
<span class="n">locations</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># once the map is displayed, click the tab to display the satellite view</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">markers</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">marker_layer</span><span class="p">(</span><span class="n">locations</span><span class="o">.</span><span class="n">to_df</span><span class="p">())</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">markers</span><span class="p">)</span>
<span class="n">fig</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Let's change the color of the symbols </span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">symbols</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">symbol_layer</span><span class="p">(</span><span class="n">locations</span><span class="o">.</span><span class="n">to_df</span><span class="p">(),</span><span class="n">fill_color</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
<span class="n">fig</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Now the most interesting bit of data is still not being used, the Treatment Arm
Lets assign different colors to the different treatment arms
So that when we map it we can look and see if the arms appear to be randomly distributed</p>

<p>The following is function, that assigns the 1-7 of the treatment arms to a set of colors</p>

<p>Here is the colors reference if you are interested!<br />
https://www.w3.org/TR/css3-color/#html4</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="n">arm</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'fuschia'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'red'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'purple'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'green'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'blue'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'olive'</span>
    <span class="k">elif</span> <span class="n">arm</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">'teal'</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Using the .apply method, you can apply any function to a data frame</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">springsGPS</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="s">"treatment_arm"</span><span class="p">)</span>
<span class="n">springsGPS</span> <span class="o">=</span> <span class="n">springsGPS</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s">"color"</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
<span class="n">springsGPS</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">symbols</span> <span class="o">=</span> <span class="n">gmaps</span><span class="o">.</span><span class="n">symbol_layer</span><span class="p">(</span><span class="n">locations</span><span class="o">.</span><span class="n">to_df</span><span class="p">(),</span>
                             <span class="n">stroke_color</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">springsGPS</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">"color"</span><span class="p">)),</span><span class="c">#['color'].tolist(),</span>
                             <span class="n">fill_color</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">springsGPS</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">"color"</span><span class="p">))</span><span class="c">#['color'].tolist()</span>
                            <span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
<span class="n">fig</span>

</code></pre></div>    </div>
  </div>

</div>

<p><strong>Visual inspection of the map:</strong>
Do the colors seem randomly distributed ?
In fact the randomization was performed on just a list of the springs using a random number generator.  It did not take spatial distribution into effect.</p>

<h2 id="question-1----thought-experiment---spatial-randomization">Question 1  - Thought Experiment - Spatial Randomization</h2>
<p>1.1 What could you do to test whether the Treatment arms are spatially distributed.</p>

<p>1.2 What could you do to randomize the treatment arms over space.</p>

<div id="Balance"></div>

<h1 id="balance-check-and-variable-names">Balance Check and Variable Names</h1>

<h2 id="baseline-survey">Baseline Survey</h2>
<p>This is our first look at the survey dataset.  These are a limited set of questions/answers from a simple and short baseline survey. However it is a lot bigger and messier than the datasets we have been seeing in Data8.</p>

<p>Data variable names follow along with the survey below, referred to by the section, a,b,c… number, 1,2,3… and a few words about the question.</p>

<p>The purpose of this section will be:</p>
<ul>
  <li>to get a familiarity with the dataset,</li>
  <li>to look at some background descriptor variables of the households,</li>
  <li>to start to think about missing values and coding of subsets of the data.</li>
  <li>to checking the randomization of households by seeeing if the different arms of the study are balanced across some of the key baseline variables.</li>
</ul>

<p><strong>The surveys that illustrate the raw data names are in a Box folder linked here -  You have to go and look through this survey to understand the variables</strong>
https://goo.gl/TzzvLb  or  https://drive.google.com/open?id=1UVoiVn7LJ4rn7WEb-9BJ96jmdJ2FBk60</p>

<p><em>A note on Pandas vs datascience/tables</em></p>
<ul>
  <li>The main Data8 class is taught mostly using a Python package designed specifically for the class called <code class="highlighter-rouge">datascience</code>.  The more popular package for statistical analysis is called <code class="highlighter-rouge">pandas</code>.</li>
  <li>Throughout this Lab, there are some commands mostly in <code class="highlighter-rouge">Pandas</code></li>
</ul>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Option to allow Pandas to display many columns</span>
<span class="c"># there are 200 something columns in this dataset</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">'display.max_columns'</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGP_baseline</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s">'WGP_baseline_Data8.dta'</span><span class="p">))</span>
<span class="n">WGP_baseline</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="misssing-values--nan">Misssing values ~ NaN</h2>
<p>if you look through the dataset above, and scroll to the right a ways to some of the last variables, you will notice that that there are a lot of cells with NaN, which means a missing value. For these cells no data was entered at the time of data entry. In some cases it may be appropriate to enter a zero and carry on with the analyis.</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># There are a lot of missing values in the data, so we can make a copy of the dataset/dataframe</span>
<span class="c"># that has zeros in the place of 'nan' - mising data values</span>
<span class="n">WGP_base_dfna</span> <span class="o">=</span> <span class="n">WGP_baseline</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c"># this is a second dataframe that we can call with a different name</span>
<span class="n">WGP_base_dfna</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Lets make a datascience table at the same time</span>
<span class="n">WG_basetable</span><span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">WGP_baseline</span><span class="p">)</span>
<span class="c"># this is a table that we can use with the data8/datascience commands</span>
<span class="n">WG_basetable</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Look at the variable names, and then look at the survey form to find the concordance of codes</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Here is a list of all of the possible categories / columns</span>
<span class="nb">list</span><span class="p">(</span><span class="n">WGP_baseline</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="what-are-some-variables-that-we-want-to-specifically-look-at">What are some Variables that we want to specifically look at?</h2>

<h3 id="front-page-information---a-variables">Front Page information - A variables</h3>
<ul>
  <li>household id,</li>
  <li>spring id,</li>
  <li>interviewer id</li>
</ul>

<h3 id="information-about-respondent---b-variables">Information about respondent - B variables</h3>
<ul>
  <li>tribe</li>
  <li>education</li>
  <li>age</li>
  <li>gender</li>
  <li>group membership</li>
</ul>

<h3 id="water-guard-use---c-variables">Water Guard Use - C variables</h3>
<p>for Waterguard (WG),(survey questions on other chlorine not in this dataset)</p>

<ul>
  <li>c1a - have you ever heard of WG</li>
  <li>c2a - have you ever used WG</li>
  <li>c3a - is your water currently treated with WG</li>
  <li>c4a - have you used WG in past month</li>
</ul>

<h3 id="durable--capital-goods---d-variables">Durable / Capital Goods - D variables</h3>
<ul>
  <li>electricity  / latrine / iron roof  ( yes / no)</li>
  <li>bicycle/ radio / hoe / beds ( number of items owned)</li>
  <li>number of animals (number)</li>
</ul>

<h3 id="child-health---e-variables">Child Health - E variables</h3>
<ul>
  <li>number of kids under 5 =  e1_num_kids_under_5</li>
</ul>

<p>e2_ This table becomes tricky because it has a different format 
Each kid in the table is numbered 01, 02 etc
and then the subsequent questions keyed to that child number
e2e_01_d_diarrhea, e2e_02_d_diarrhea, e2e_03_d_diarrhea
for four diseases:</p>

<ul>
  <li>cough</li>
  <li>Diarrhea</li>
  <li>fever_malaria</li>
  <li>vomiting</li>
</ul>

<h3 id="treatment-arm----there-is-an-additional-variable-called-treatment-arm">Treatment Arm -  There is an additional variable called treatment arm</h3>
<h3 id="arm-1-is-control-and-arms-2-7-are-different-types-of-treatment-interventions">Arm 1 is control, and Arms 2-7 are different types of treatment interventions</h3>

<ul>
  <li>Arm 1 - Control</li>
  <li>Arm 2 - Household Script</li>
  <li>Arm 3 - Community Script</li>
  <li>Arm 4 - HH + Community Script</li>
  <li>Arm 5 - Flat-Fee Promoter + Coupons</li>
  <li>Arm 6 - Incentivized Promoter + Coupons</li>
  <li>Arm 7 - Incentivized Promoter + Dispenser at Spring</li>
</ul>

<p><em>How many households are in each Treatment Arm?</em></p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WG_basetable</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">"treatment_arm"</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="baseline-check---exposure-to-water-guard-use">Baseline Check - Exposure to Water Guard Use</h2>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">### Using a variable for if the Household has ever used WaterGuard</span>
<span class="n">WGP_baseline</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"c2a_wg_used_ever"</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<p>The data is currently Coded as 1 = Yes and 2 = No</p>

<p>So we cant really make sense of the Mean of the variable in its current form</p>

<p>Make a new column/variable with 1/2 answers translated into Yes/NO</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"WG Ever Use"</span><span class="p">]</span> <span class="o">=</span> <span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"c2a_wg_used_ever"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">"category"</span><span class="p">)</span>
<span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"WG Ever Use"</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Yes"</span><span class="p">,</span> <span class="s">"No"</span> <span class="p">]</span>
<span class="n">WGP_baseline</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"WG Ever Use"</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="crosstab---in-pandas">Crosstab - in <code class="highlighter-rouge">pandas</code></h2>

<p>Now we will use a command called a <code class="highlighter-rouge">Crosstab</code> - that is an abbreviation for cross-tabulation - that is easy to call in <code class="highlighter-rouge">pandas</code> but we would need to program in <code class="highlighter-rouge">datascience</code></p>

<p>We can first use it to do a  balance check for Water Guard use across Arms</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Table of treatment arm vs Water Guard Use but with Percentages</span>
<span class="n">WGUsec2VStreatment</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"WG Ever Use"</span><span class="p">],</span> 
                            <span class="n">columns</span><span class="o">=</span><span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"treatment_arm"</span><span class="p">],</span>
                             <span class="n">margins</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c"># Include row and column totals</span>
<span class="n">WGUsec2VStreatment</span><span class="o">/</span><span class="n">WGUsec2VStreatment</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">"All"</span><span class="p">]</span>



</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Now lets check and see how many households are currently using WG -</span>
<span class="c"># Variable name is c3a_wg_water_currently_treat</span>

<span class="n">WGP_baseline</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"c3a_wg_water_currently_treat"</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<p><em>Do you notice a problem here? Look at the total numbers reported in the output above</em></p>

<p>We can do the same percentage tables for the balance check</p>

<p>but maybe there’s a problem?  ( look at the total number of hhs answering the question!)</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Table of treatment arm vs Water Guard Use but with Percentages</span>
<span class="n">WG_c3VStrt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"c3a_wg_water_currently_treat"</span><span class="p">],</span> 
                            <span class="n">columns</span><span class="o">=</span><span class="n">WGP_baseline</span><span class="p">[</span><span class="s">"treatment_arm"</span><span class="p">],</span>
                             <span class="n">margins</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c"># Include row and column totals</span>
<span class="n">WG_c3VStrt</span><span class="o">/</span><span class="n">WG_c3VStrt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">"All"</span><span class="p">]</span>
<span class="c"># In this case the 1's represent the percent  answering yes, out of all those who answered the question</span>


</code></pre></div>    </div>
  </div>

</div>

<p><strong>Seems like a really high usage … maybe this is due to missing values</strong></p>

<p>Earlier we created a dataset where the missing values “nan” were replaced with zeros</p>

<p>If we use this dataset we would have percents over the total population surveyed</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Table of treatment arm vs Water Guard Use,  Percentages, with missing values substituted with zeros</span>
<span class="n">WG_c3VStrt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">WGP_base_dfna</span><span class="p">[</span><span class="s">"c3a_wg_water_currently_treat"</span><span class="p">],</span> 
                            <span class="n">columns</span><span class="o">=</span><span class="n">WGP_base_dfna</span><span class="p">[</span><span class="s">"treatment_arm"</span><span class="p">],</span>
                             <span class="n">margins</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c"># Include row and column totals</span>
<span class="n">WG_c3VStrt</span><span class="o">/</span><span class="n">WG_c3VStrt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">"All"</span><span class="p">]</span>
<span class="c"># In this case the 1's represent the percent  answering yes, out of all those who were surveyed</span>


</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Lets make this Crosstab Table look a little nicer, by rounding and multiplying by 100</span>
<span class="n">np</span><span class="o">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">WG_c3VStrt</span><span class="o">/</span><span class="n">WG_c3VStrt</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">"All"</span><span class="p">],</span><span class="mi">2</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="question-2">Question 2</h2>
<ul>
  <li>2.1 Explain the previous table clearly and concisely, as if you were explaining it to someone who didnt know the back story</li>
  <li>2.2What are the rows, what are the columns, why are we doing this?  ( Rows - What does the 0 mean, what does the 1 mean and what does the 2 Mean? )</li>
  <li>2.3 Balance Check - How does the randomization look?</li>
</ul>

<div id="Baseline"></div>

<h1 id="baseline-and-a-randomly-selected-compound">Baseline and a Randomly Selected Compound</h1>

<h3 id="lets-have-you-describe-a-household-selected-at-random">Lets have you describe a household selected at Random</h3>

<p>Step 1) Lets extract the household / compound id into an array of all the possible values</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hhld_array</span><span class="o">=</span><span class="n">WG_basetable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'a1_cmpd_id'</span><span class="p">)</span>

<span class="n">hhld_array</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Step 2) Lets draw randomly from this array</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">randomhh</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">hhld_array</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"My randomly selected household is"</span> <span class="p">,</span> <span class="n">randomhh</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Step 3)  Lets Look at the data for my randomly selected HH:</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myfamily</span> <span class="o">=</span> <span class="n">WG_basetable</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"a1_cmpd_id"</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">WG_basetable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'a1_cmpd_id'</span><span class="p">)))</span>
<span class="n">myfamily</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Some of the variables may need some manipulation - Lets start with the age of the respondant:</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">birthyear</span><span class="o">=</span>  <span class="n">myfamily</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">"b3_birth_year"</span><span class="p">)</span>  <span class="c"># find the variable</span>
<span class="n">surveyyear</span><span class="o">=</span> <span class="n">myfamily</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">"a5_date_interview_year"</span><span class="p">)</span> <span class="c"># find the variable</span>
<span class="n">agecalc</span> <span class="o">=</span><span class="n">surveyyear</span><span class="o">-</span><span class="n">birthyear</span>  <span class="c"># </span>
<span class="n">agecalc</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  code the answer for Tribe</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Survey respondent Tribe"</span><span class="p">,</span><span class="n">myfamily</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"b5_tribe"</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Respondent Spouse Tribe"</span><span class="p">,</span><span class="n">myfamily</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"b7_tribe_spouse"</span><span class="p">))</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Does the household have a latrine?"</span><span class="p">,</span><span class="n">myfamily</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"d3_latrine"</span><span class="p">))</span>

</code></pre></div>    </div>
  </div>

</div>

<p>Remember in the answer above it is coded so that 1=Yes and 2=No</p>

<h1 id="question-3---describe-your-randomly-selected-household-and-the-respondent-who-is-answering-the-survey">Question 3 - Describe your randomly selected household and the respondent who is answering the survey.</h1>

<ol>
  <li>Age</li>
  <li>Tribe</li>
  <li>Education -</li>
  <li>Member of any groups b11-b15?</li>
  <li>Occupation -</li>
  <li>Religion -</li>
  <li>A summary of D variables, iron roof, floor materials, latrine, cattle, others..</li>
  <li>Have they ever used WG?</li>
  <li>Treatment Arm - what was the assignment</li>
  <li>How many children do they have</li>
  <li>Gender and Age of children</li>
  <li>Have any of the children been sick?</li>
</ol>

<div id="Chlorine"></div>

<h1 id="chlorine-usage-outcome-variables">Chlorine Usage outcome variables</h1>

<h2 id="wgp-followup---variability">WGP Followup - Variability</h2>
<p>The purpose of this section will be to continue on with the follow-up rounds of the Water Guard Promotion study.   In this section we have both the household reported use, and the use validated by checking the chlorine content of the water using a test kit.</p>

<p>To present this outcome data we need to program the following</p>
<ol>
  <li>Graphing Data by treatment arm</li>
  <li>Confidence Interval - standard deviation  - error bars</li>
</ol>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGP3rds_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s">'WGP_3waves_Data8.dta'</span><span class="p">))</span>
<span class="n">WGP3rds_table</span><span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">WGP3rds_df</span><span class="p">)</span>
<span class="c">#WGP_df.head(10)</span>

</code></pre></div>    </div>
  </div>

</div>

<h5 id="this-is-a-large-dataset-basically-three-datasets-merged-together-one-for-baseline-one-for-short-term-follow-up-and-one-for-long-term-followup">This is a large dataset, basically three datasets merged together, one for baseline, one for short term follow up and one for long term followup</h5>
<ul>
  <li>Round = 1 : baseline</li>
  <li>Round = 2 : 3 week followup</li>
  <li>Round = 3 : 3 month followup</li>
</ul>

<p>Many of the variables are only asked in one of the three rounds</p>

<ul>
  <li>The variable for self_reported chlorine use was “c6n” in Round 2, and ‘c5n’ in Round 3</li>
  <li>The variable for chlorine use is “c12n21pnk” in Round 2 and ‘c15npt2or1pnk’ in Round3</li>
</ul>

<p><strong>The following variables have been combined across rounds for the ease of programming</strong></p>
<ul>
  <li>‘Selfrptpct’ is self reported chlorine use in both round 2 and round 3</li>
  <li>‘Vldclpct’  is validated chlorine use in both rounds</li>
</ul>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Here is a list of all of the possible categories / columns</span>
<span class="c">#list(WGP3rds_df)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#WGP_baseline.groupby('e1_num_kids_under_5').size()</span>
<span class="n">WGP3rds_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGP3rds_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'round'</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<p><strong>Groupby</strong></p>

<p>Another really nice <code class="highlighter-rouge">pandas</code> feature is the ability to group by two different variables. In this calse we want to group by survey round, and by treatment arm.</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGP3rds_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span> <span class="s">'round'</span><span class="p">,</span> <span class="s">'treatment_arm'</span><span class="p">,])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Which brings us to a new  way to look at the outcome data - grouping by two variables in Pandas an calling for means</span>
<span class="c"># Make a smaller df with just the outcome variables</span>
<span class="n">WGP_3rds_outcomesonly</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">WGP3rds_df</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'round'</span><span class="p">,</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct'</span><span class="p">,</span><span class="s">'Vldclpct'</span><span class="p">])</span>
<span class="c"># Then call for the means</span>
<span class="n">WGP_3rds_outcomesonly</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span> <span class="s">'round'</span><span class="p">,</span><span class="s">'treatment_arm'</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

</code></pre></div>    </div>
  </div>

</div>

<h3 id="making-a-smaller-dataset">Making a smaller dataset</h3>

<p>Lets break out a smaller dataset of the variables we want to focus on - just for Round 2, just for the outcome variables</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGPRd2</span> <span class="o">=</span> <span class="n">WGP3rds_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"round"</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"a1_cmpd_id"</span><span class="p">,</span><span class="s">"treatment_arm"</span><span class="p">,</span>
                                           <span class="s">"c6_current_water_treated_wg"</span><span class="p">,</span> 
                                           <span class="s">'c6_curr_water_treat_other_c'</span><span class="p">,</span>
                                           <span class="s">'c12_chlorine_meter_reading'</span><span class="p">,</span>
                                           <span class="s">'c11_chlorine_color'</span><span class="p">,</span><span class="s">'c12n21pnk'</span><span class="p">,</span> <span class="s">'c6n'</span>
                                          <span class="p">)</span>
<span class="n">WGPRd2</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># make a pandas dataframe df for Round 2</span>
<span class="n">WGP_rnd2df</span><span class="o">=</span> <span class="n">WGP3rds_df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">WGP3rds_df</span><span class="p">[</span><span class="s">'round'</span><span class="p">]</span> <span class="o">==</span><span class="mi">2</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># we can start by looking at the estimate of WG use in Round 2 across all treatment arms ( for the entire sample) </span>
<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'c12n21pnk'</span><span class="p">))</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="confidence-interval">Confidence Interval</h2>

<p>Lets compute a confidence interval for the percent of households using Chlorine ( Validated by a Chlorine measurement)</p>

<ol>
  <li>Compute the proportion</li>
  <li>Number in each population</li>
  <li>Standard Errors following a formula</li>
  <li>Confidence Interval</li>
</ol>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Compute Standard Error of a proportion</span>
<span class="c"># We can do this the first time for the entire sample</span>
<span class="c"># Save the followng values</span>
<span class="n">p_all</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'c12n21pnk'</span><span class="p">))</span>
<span class="n">N_all</span><span class="o">=</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">num_rows</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  The formula for the SE of a proportion is sqrt((p1(1-p1))/N)</span>
<span class="n">se_all</span><span class="o">=</span><span class="p">((</span><span class="n">p_all</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">p_all</span><span class="p">))</span><span class="o">/</span><span class="n">N_all</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
<span class="n">se_all</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Upper bound of CI</span>
<span class="c"># Using Z = 1.96</span>
<span class="n">Z</span><span class="o">=</span><span class="mf">1.96</span>
<span class="n">upper_all</span> <span class="o">=</span> <span class="n">p_all</span><span class="o">+</span><span class="n">Z</span><span class="o">*</span><span class="n">se_all</span>
<span class="n">lower_all</span> <span class="o">=</span> <span class="n">p_all</span><span class="o">-</span><span class="n">Z</span><span class="o">*</span><span class="n">se_all</span>
<span class="n">CI_all</span><span class="o">=</span><span class="p">(</span><span class="n">upper_all</span><span class="p">,</span><span class="n">lower_all</span><span class="p">)</span>
<span class="n">CI_all</span>

</code></pre></div>    </div>
  </div>

</div>

<h2 id="using-this-technique-we-can-look-at-the-confidence-intervals-for-each-of-the-treatment-arms">Using this technique we can look at the Confidence Intervals for each of the treatment arms</h2>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Here is the code for just arm 1</span>
<span class="n">p_1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"treatment_arm"</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'c12n21pnk'</span><span class="p">))</span>
<span class="n">N_1</span><span class="o">=</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"treatment_arm"</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">num_rows</span>
<span class="n">N_1</span>
<span class="k">print</span><span class="p">(</span><span class="s">"In Round 2, the number of households in arm 1 Control is:"</span><span class="p">,</span> <span class="n">N_1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The share of households with Validated WG use is: "</span><span class="p">,</span> <span class="n">p_1</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">se_1</span><span class="o">=</span><span class="p">((</span><span class="n">p_1</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">p_1</span><span class="p">))</span><span class="o">/</span><span class="n">N_1</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The standard error of the Validated WG estimate is: "</span><span class="p">,</span> <span class="n">se_1</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Upper bound of CI</span>
<span class="c"># Using Z = 1.96</span>
<span class="n">Z</span><span class="o">=</span><span class="mf">1.96</span>
<span class="n">upper_1</span> <span class="o">=</span> <span class="n">p_1</span><span class="o">+</span><span class="n">Z</span><span class="o">*</span><span class="n">se_1</span>
<span class="n">lower_1</span> <span class="o">=</span> <span class="n">p_1</span><span class="o">-</span><span class="n">Z</span><span class="o">*</span><span class="n">se_1</span>
<span class="n">CI_1</span><span class="o">=</span><span class="p">(</span><span class="n">upper_1</span><span class="p">,</span><span class="n">lower_1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The 95</span><span class="si">% </span><span class="s">Confidence Interval for Validated WG use is: "</span><span class="p">,</span> <span class="n">CI_1</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<p>** Repeating for Arm 2 **</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Here is the code for just arm 2</span>
<span class="n">p_2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"treatment_arm"</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'c12n21pnk'</span><span class="p">))</span>
<span class="n">N_2</span><span class="o">=</span><span class="n">WGPRd2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"treatment_arm"</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">num_rows</span>
<span class="n">N_2</span>
<span class="k">print</span><span class="p">(</span><span class="s">"In Round 2, the number of households in arm 1 Control is:"</span><span class="p">,</span> <span class="n">N_2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The share of households with Validated WG use is: "</span><span class="p">,</span> <span class="n">p_2</span><span class="p">)</span>
<span class="n">se_2</span><span class="o">=</span><span class="p">((</span><span class="n">p_2</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">p_2</span><span class="p">))</span><span class="o">/</span><span class="n">N_2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The standard error of the Validated WG estimate is: "</span><span class="p">,</span> <span class="n">se_2</span><span class="p">)</span>
<span class="c"># Upper bound of CI</span>
<span class="c"># Using Z = 1.96</span>
<span class="n">Z</span><span class="o">=</span><span class="mf">1.96</span>
<span class="n">upper_2</span> <span class="o">=</span> <span class="n">p_2</span><span class="o">+</span><span class="n">Z</span><span class="o">*</span><span class="n">se_2</span>
<span class="n">lower_2</span> <span class="o">=</span> <span class="n">p_2</span><span class="o">-</span><span class="n">Z</span><span class="o">*</span><span class="n">se_2</span>
<span class="n">CI_2</span><span class="o">=</span><span class="p">(</span><span class="n">upper_2</span><span class="p">,</span><span class="n">lower_2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"The 95</span><span class="si">% </span><span class="s">Confidence Interval for Validated WG use is: "</span><span class="p">,</span> <span class="n">CI_2</span><span class="p">)</span>


</code></pre></div>    </div>
  </div>

</div>

<h2 id="question-41---what-can-we-tell-by-comparing-the-confidence-intervals-for-arm-1-and-arm-2--do-they-overlap--what-does-that-mean">Question 4.1 - What can we tell by comparing the confidence intervals for Arm 1 and Arm 2.  Do they overlap?  What does that mean?</h2>

<p><strong><em>type your answer here</em></strong></p>

<h2 id="question-42---propose-an-additional-hypothesis-to-test-with-this-data--program-the-confidence-interval-for-another-treatment-arm-and-see-if-it-is-different-than-the-control-arm">Question 4.2 - Propose an additional hypothesis to test with this data?  Program the confidence interval for another treatment arm and see if it is different than the control arm.</h2>

<p><em>**written answer proposing a hypothesis test **</em></p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># coding section</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># coding section</span>

</code></pre></div>    </div>
  </div>

</div>

<div id="Graph"></div>

<h1 id="graph-of-outcomes-by-treatment-arm">Graph of outcomes by Treatment Arm</h1>

<h2 id="wgp-followup-round-2-round-3-and-across-rounds">WGP Followup Round 2, Round 3, and across rounds</h2>

<p>Now we will work on making a make a summary graph for the WGP study. This graph should show the seven treatment arms with the levels of our outcomes, and include error bars.  In addition, we can work on customizing and saving our graph.</p>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WGPRd2</span> <span class="o">=</span> <span class="n">WGP3rds_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"round"</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"a1_cmpd_id"</span><span class="p">,</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct'</span><span class="p">,</span> <span class="s">'Vldclpct'</span><span class="p">)</span>
<span class="n">WGPRd2</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Lets group by treatment_arm take the means of each group</span>
<span class="c"># This corresponds to the summary stats in Lab 5</span>
<span class="n">round2_means</span> <span class="o">=</span> <span class="n">WGPRd2</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="n">round2_means</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># We have the means in a table, let's also make an array of these outcomes</span>
<span class="c"># Save the means into an array for later use</span>
<span class="n">round2_means_self_array</span> <span class="o">=</span> <span class="n">round2_means</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'Selfrptpct mean'</span><span class="p">)</span>
<span class="n">round2_means_vld_array</span> <span class="o">=</span> <span class="n">round2_means</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'Vldclpct mean'</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># first graph - bar chart </span>
<span class="n">round2_means</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct mean'</span><span class="p">)</span> 

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Round 2 - bar chart with both self and validated </span>
<span class="n">round2_means</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="n">make_array</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> 

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># redoing it for round 3</span>
<span class="n">WGPRd3</span> <span class="o">=</span> <span class="n">WGP3rds_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">"round"</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">"a1_cmpd_id"</span><span class="p">,</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct'</span><span class="p">,</span> <span class="s">'Vldclpct'</span><span class="p">)</span>
<span class="n">round3_means</span> <span class="o">=</span> <span class="n">WGPRd3</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>

<span class="c"># array of means</span>
<span class="n">round3_means_array</span> <span class="o">=</span> <span class="n">round3_means</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'Selfrptpct mean'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">round3_means_array</span><span class="p">)</span>


</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Round 3 Graph</span>
<span class="n">round3_means</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="n">make_array</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> 

</code></pre></div>    </div>
  </div>

</div>

<h2 id="practice-with-pyplot--matplotlib">Practice with pyplot &amp; Matplotlib</h2>
<p>Now we can make a graph that compares round 2 and round 3</p>

<p>This is a more complicated graphing using Matplotlib</p>

<p><strong>references at:</strong></p>
<ol>
  <li>https://matplotlib.org/gallery/api/barchart.html</li>
  <li>https://tonysyu.github.io/raw_content/matplotlib-style-gallery/gallery.html</li>
</ol>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">'seaborn'</span><span class="p">)</span>  <span class="c"># You can try changing the style </span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>  <span class="c"># the x locations for the groups</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>       <span class="c"># the width of the bars</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">rects1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">round2_means_self_array</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'g'</span><span class="p">)</span>
<span class="n">rects2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">round3_means_array</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'b'</span><span class="p">)</span>

<span class="c"># add some text for labels, title and axes ticks</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent of HH using WG'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Self reported WG use'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Treatment Arm'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ind</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">((</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span><span class="s">'7'</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="n">rects1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rects2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="p">,(</span><span class="s">'3 Week Visit'</span><span class="p">,</span> <span class="s">'3 Month Visit'</span><span class="p">)</span>  <span class="c"># relabeling Round 2 and Round 3</span>
          <span class="p">,</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>  <span class="c"># placing the legend in the graph </span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c"># If you want to save the figure into an image file</span>
<span class="c">#plt.savefig("test.png")</span>




</code></pre></div>    </div>
  </div>

</div>

<h2 id="question-5---make-a-version-of-this-graph-for-validated-presence-of-wg">Question 5 - Make a version of this graph for Validated Presence of WG</h2>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  Code in here</span>

</code></pre></div>    </div>
  </div>

</div>

<p><em>Explanation of what you did here</em></p>

<h2 id="extra-credit-section-on-error-bars-if-you-are-interested">Extra Credit Section on Error Bars… if you are interested</h2>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  Repeat this for the standard deviation</span>
<span class="n">round2_stdev</span> <span class="o">=</span> <span class="n">WGPRd2</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">)</span>
<span class="n">round2_stdev</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Get the number in each arm for adjusting the SD</span>
<span class="n">round2_num</span><span class="o">=</span> <span class="n">WGPRd2</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">)</span>
<span class="n">round2_num</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># make an array of standard errors</span>
<span class="n">round2_self_stdev_array</span><span class="o">=</span> <span class="n">round2_stdev</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'Selfrptpct std'</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">round2_self_stdev_array</span><span class="p">)</span>
<span class="c"># make an array of numbers n</span>
<span class="n">round2_self_num_array</span> <span class="o">=</span> <span class="n">round2_num</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'count'</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">round2_self_num_array</span><span class="p">)</span>
<span class="c"># make and array of the square root of n</span>
<span class="n">round2_self_sqrtn_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">round2_self_num_array</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">round2_self_sqrtn_array</span><span class="p">)</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Make the standard error dividing the SD by the square root of n</span>
<span class="n">round2_self_se</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">round2_self_stdev_array</span><span class="p">,</span><span class="n">round2_self_sqrtn_array</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">round2_self_se</span><span class="p">)</span>
<span class="n">round2_self_2se</span> <span class="o">=</span> <span class="n">round2_self_se</span><span class="o">*</span><span class="mi">2</span>
<span class="n">round2_self_2se</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Let's add in the error bars - adding in yerr= 2* SE - this would be the 95% Confidence Interval</span>
<span class="n">round2_means</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct mean'</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">round2_self_2se</span><span class="p">)</span> 

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Standard Errors for round 3</span>
<span class="n">round3_stdev</span> <span class="o">=</span> <span class="n">WGPRd3</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">)</span>
<span class="n">round3_num</span><span class="o">=</span> <span class="n">WGPRd3</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">)</span>
<span class="c"># make an array of standard errors</span>
<span class="n">round3_self_stdev_array</span><span class="o">=</span> <span class="n">round3_stdev</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'Selfrptpct std'</span><span class="p">)</span>
<span class="n">round3_self_num_array</span> <span class="o">=</span> <span class="n">round3_num</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'count'</span><span class="p">)</span>
<span class="n">round3_self_sqrtn_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">round2_self_num_array</span><span class="p">)</span>
<span class="c">#print (round2_self_sqrtn_array)</span>
<span class="n">round3_self_se</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">round3_self_stdev_array</span><span class="p">,</span><span class="n">round3_self_sqrtn_array</span><span class="p">)</span>
<span class="k">print</span> <span class="p">(</span><span class="n">round3_self_se</span><span class="p">)</span>
<span class="n">round3_self_2se</span> <span class="o">=</span> <span class="n">round3_self_se</span><span class="o">*</span><span class="mi">2</span>
<span class="n">round3_self_2se</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Round 3 Graph</span>
<span class="n">round3_means</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'treatment_arm'</span><span class="p">,</span><span class="s">'Selfrptpct mean'</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">round3_self_2se</span><span class="p">)</span> 

</code></pre></div>    </div>
  </div>

</div>

<h2 id="extra-credit-----make-another-graph">Extra Credit  -  Make another graph</h2>
<p>Make another graph similar but different to the previous 6 ones above, that</p>
<ul>
  <li>uses the Validated means and Confidence Intervals</li>
  <li>looks awesome ( change the colors, choose the orientation, think about what you wish it looked like)</li>
  <li>Add a short paragraph of explanation - what can you summarize from looking at the error bars in your graph?</li>
</ul>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  add code here </span>

</code></pre></div>    </div>
  </div>

</div>

<p>Write a short paragraph explaining and interpereting your graph</p>

<h2 id="practice-with-pyplot--matplotlib-1">Practice with pyplot &amp; Matplotlib</h2>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># This is just to check our inputs in to the more complicated graph in the following cell</span>
<span class="c">#print(round2_means_array,round2_self_stderr_array )</span>
<span class="c"># Shouldnt be necessary, but in case you have problems</span>

</code></pre></div>    </div>
  </div>

</div>

<div class="cell code_cell">
  <div class="input_area">
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Now we can make a graph that compares round 2 and round 3 </span>
<span class="c"># This is a more complicated graphing using Matplotlib</span>

<span class="c"># following from https://matplotlib.org/gallery/api/barchart.html</span>
<span class="c"># https://tonysyu.github.io/raw_content/matplotlib-style-gallery/gallery.html</span>
<span class="c">#plt.style.use('fivethirtyeight')</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">'classic'</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>  <span class="c"># the x locations for the groups</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>       <span class="c"># the width of the bars</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">rects1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">round2_means_self_array</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'g'</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">round2_self_2se</span><span class="p">)</span>

<span class="n">rects2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">round3_means_array</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'b'</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">round3_self_2se</span><span class="p">)</span>

<span class="c"># add some text for labels, title and axes ticks</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent of HH using WG'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Self reported WG use'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Treatment Arm'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ind</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">((</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span><span class="s">'7'</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="n">rects1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rects2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
          <span class="p">,(</span><span class="s">'3 Week Visit'</span><span class="p">,</span> <span class="s">'3 Month Visit'</span><span class="p">)</span>
          <span class="p">,</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>

<span class="c">#plt.savefig("WG_Trial.png")</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


</code></pre></div>    </div>
  </div>

</div>


              <nav class="c-page__nav">
  
    
    <a id="js-page__nav__prev" class="c-page__nav__prev" href="/econ-models-textbook/topic-intros/development.html">
      〈 <span class="u-margin-right-tiny"></span> Economic Development: Africa
    </a>
  

  
    
    <a id="js-page__nav__next" class="c-page__nav__next" href="/econ-models-textbook/topic-intros/finance.html">
      Finance and Time Series Data <span class="u-margin-right-tiny"></span> 〉
    </a>
  
</nav>

            </div>
          </div>
        </div>
      </main>
    </div>

  </body>
</html>
