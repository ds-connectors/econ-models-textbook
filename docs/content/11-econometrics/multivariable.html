

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Multivariable Regression and Bias &#8212; Data 88: Economic Models Textbook</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/plotly.min.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.13.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reading Economics Papers" href="reading-econ-papers.html" />
    <link rel="prev" title="Using statsmodels for Regression" href="statsmodels.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/econ-models.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Data 88: Economic Models Textbook</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-demand/index.html">
   Demand and Market Equilibrium
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02-supply/index.html">
   Supply &amp; Elasticity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03-public/index.html">
   Public Economics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04-production/index.html">
   Production
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../05-utility/index.html">
   Utility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06-development/index.html">
   Development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07-game-theory/index.html">
   Game Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../08-behavioral/index.html">
   Behavioral Economics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../09-finance/index.html">
   Finance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10-inequality/index.html">
   Inequality
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="reference internal" href="index.html">
   Econometrics
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="single-variable.html">
     Single Variable Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="statsmodels.html">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       statsmodels
      </span>
     </code>
     for Regression
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Multivariable Regression and Bias
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="reading-econ-papers.html">
     Reading Economics Papers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12-macro/index.html">
   Macroeconomic Policy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   Bibliography
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/11-econometrics/multivariable.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ds-connectors/econ-models-Textbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ds-connectors/econ-models-Textbook/master?urlpath=tree/content/11-econometrics/multivariable.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/ds-connectors/econ-models-Textbook&urlpath=tree/econ-models-Textbook/content/11-econometrics/multivariable.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> On this page
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multivariable-regression">
   Multivariable Regression
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualizing-multivariable-regression">
     Visualizing Multivariable Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#colinearity-and-dummy-variables">
   Colinearity and Dummy Variables
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="multivariable-regression-and-bias">
<h1>Multivariable Regression and Bias<a class="headerlink" href="#multivariable-regression-and-bias" title="Permalink to this headline">¶</a></h1>
<p>Our procedure earlier showed that we expect to see roughly a 70% increase in earnings in people who went to college vs. people who did not go to college. Does this imply that your decision to go to college was worthwhile, and now you can expect to have roughly 70% higher earnings compared to the version of you who did not go to college?</p>
<p>Let’s go back to our discussion of experiments from earlier. In an ideal experiment, we would want a good sample of people who are about to graduate high school, and then randomly assign them to either a treatment group that gets sent to college, and a control group that does not. If you are in the treatment group you <em>must</em> go to college, and if you are in the control group you <em>cannot</em> go to college. Since the decision to go to college in this case is completely random, we can safely assume that the treatment and control groups are on average identical in attributes, apart from college attendance. We can therefore compare their log earnings in the future to see the effect of going to college.</p>
<p>Clearly this experiment is impossible to perform. We cannot randomly assign people to go to college. What’s different between this ideal experiment and our regression from earlier? What’s the issue with comparing the differences in log earnings for people in our sample who happened to go to college and those who did not?</p>
<p>In our sample, the treatment (went to college) and control (did not go to college) groups are not identical in every way except for college! People aren’t randomly assigned college, they <em>choose</em> to go to college. The factors that cause someone to go to college are complex and lead to differences between people who chose to go to college and those who did not. When we perform regression on the variable <code class="docutils literal notranslate"><span class="pre">college</span></code>, since the groups in the sample are different, not only are we capturing the effect of going to college, but we are also capturing the effects of everything else that is different about the two groups that also affects earnings.</p>
<p>Imagine another variable that captures the wealth of your family. College can be very expensive, so it might be the case that the wealthier your family is, the more likely you are to go to college. Also, it’s easy to imagine that the wealthier your family is, the wealthier you are likely to be in the future. This implies that the group of people in the sample who went to college will tend to be wealthier than the group that did not. Also, the group of people who went to college is expected to earn more not necessarily because they went to college, but simply because they are wealthier.</p>
<p>Therefore, when we do regression to measure the differences in earnings between people who went to college and those who did not, we also capture differences in earnings between people who grew up wealthier and those who did not. Because of this, we <em>over-estimate</em> the effect of going to college. <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> captures the average observed benefit of going to college <em>and</em> being wealthier, but we’re only interested in college. This is called <em>omitted variable bias</em>. Family wealth is an omitted variable in this regression and it’s causing our results to be biased.</p>
<p>Let’s think of another example of omitted variable bias. In the NLSY dataset, there is a variable called <code class="docutils literal notranslate"><span class="pre">AFQT</span></code>. AFQT is a score on a particular standardized test that all people in the sample took. Let’s use AFQT as a proxy measurement for the abstract idea of academic capability. While a standardized test is by no means the sole indication of someone’s ability or intelligence, let’s ignore that very complicated issue for now and assume that AFQT does an O.K. job at capturing this ability variable that is otherwise very difficult to measure.</p>
<p>Is there omitted variable bias from AFQT? Almost certainly. It seems fair to believe that people who choose to go to college are on average more academically-capable, and it also seems fair to say that on average we expect more capable people to earn more. Therefore, <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> above might be capturing the effects of being more capable, along with the effects of going to college.</p>
<p>How can we fix this issue? Multivariable regression.</p>
<div class="section" id="multivariable-regression">
<h2>Multivariable Regression<a class="headerlink" href="#multivariable-regression" title="Permalink to this headline">¶</a></h2>
<p>So far we have only been regressing outcome variable <span class="math notranslate nohighlight">\(y\)</span> onto one explanatory variable <span class="math notranslate nohighlight">\(x\)</span>. To find the regression line, we choose <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span> and <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> that minimize the mean squared error. But what if we believe that <span class="math notranslate nohighlight">\(y\)</span> is actually determined by two variables, <span class="math notranslate nohighlight">\(x_1\)</span> and <span class="math notranslate nohighlight">\(x_2\)</span>? Specifically, what if the “true” model is</p>
<div class="math notranslate nohighlight">
\[
y = \alpha + \beta_1 x_{1} + \beta_2 x_{2} + \epsilon
\]</div>
<p>and we would like to estimate</p>
<div class="math notranslate nohighlight">
\[
\hat{y} = \hat{\alpha} + \hat{\beta}_1 x_{1} + \hat{\beta}_2 x_{2}
\]</div>
<p>Now our challenge is choosing <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span>, <span class="math notranslate nohighlight">\(\hat{\beta}_1\)</span>, <em>and</em> <span class="math notranslate nohighlight">\(\hat{\beta}_2\)</span> that minimize the mean squared error. To this end, we will use the <code class="docutils literal notranslate"><span class="pre">minimize</span></code> function to minimize a function <code class="docutils literal notranslate"><span class="pre">to_minimize</span></code> that takes in model parameters and returns the model’s RMSE.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rmse</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">pred</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">pred</span><span class="p">))</span> 

<span class="k">def</span> <span class="nf">to_minimize</span><span class="p">(</span><span class="n">intercept</span><span class="p">,</span> <span class="n">beta_1</span><span class="p">,</span> <span class="n">beta_2</span><span class="p">):</span>
    <span class="n">predictions</span> <span class="o">=</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">beta_1</span> <span class="o">*</span> <span class="n">nlsy</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;college&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">beta_2</span> <span class="o">*</span> <span class="n">nlsy</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;AFQT&quot;</span><span class="p">)</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">nlsy</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;log_earn_1999&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rmse</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>

<span class="n">minimize</span><span class="p">(</span><span class="n">to_minimize</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>array([9.95595982e+00, 4.30179178e-01, 8.37569589e-03])
</pre></div>
</div>
</div>
</div>
<p>We see that <code class="docutils literal notranslate"><span class="pre">minimize</span></code> return an <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span> of 9.956, a <span class="math notranslate nohighlight">\(\hat{\beta}_1\)</span> of 0.430, and a <span class="math notranslate nohighlight">\(\hat{\beta}_2\)</span> of 0.008. Let’s perform the regression using <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> and see what we get.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">nlsy</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;log_earn_1999&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">nlsy</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;college&#39;</span><span class="p">,</span> <span class="s1">&#39;AFQT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X</span><span class="p">))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>            <td>y</td>        <th>  R-squared:         </th> <td>   0.126</td> 
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.125</td> 
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   388.5</td> 
</tr>
<tr>
  <th>Date:</th>             <td>Sun, 19 Jul 2020</td> <th>  Prob (F-statistic):</th> <td>2.12e-158</td>
</tr>
<tr>
  <th>Time:</th>                 <td>14:07:49</td>     <th>  Log-Likelihood:    </th> <td> -7421.0</td> 
</tr>
<tr>
  <th>No. Observations:</th>      <td>  5413</td>      <th>  AIC:               </th> <td>1.485e+04</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  5410</td>      <th>  BIC:               </th> <td>1.487e+04</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     2</td>      <th>                     </th>     <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
    <td></td>       <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>const</th> <td>    9.9563</td> <td>    0.025</td> <td>  401.520</td> <td> 0.000</td> <td>    9.908</td> <td>   10.005</td>
</tr>
<tr>
  <th>x1</th>    <td>    0.4301</td> <td>    0.037</td> <td>   11.731</td> <td> 0.000</td> <td>    0.358</td> <td>    0.502</td>
</tr>
<tr>
  <th>x2</th>    <td>    0.0084</td> <td>    0.001</td> <td>   16.083</td> <td> 0.000</td> <td>    0.007</td> <td>    0.009</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>2898.806</td> <th>  Durbin-Watson:     </th> <td>   1.923</td> 
</tr>
<tr>
  <th>Prob(Omnibus):</th>  <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>34192.355</td>
</tr>
<tr>
  <th>Skew:</th>           <td>-2.307</td>  <th>  Prob(JB):          </th> <td>    0.00</td> 
</tr>
<tr>
  <th>Kurtosis:</th>       <td>14.415</td>  <th>  Cond. No.          </th> <td>    155.</td> 
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div></div>
</div>
<p>Here <span class="math notranslate nohighlight">\(\hat{\beta}_1\)</span> is 0.43, compared to 0.72 from the earlier biased (single variable) regression. That’s huge! This implies that when we control for a person’s ability (i.e. we get rid of that source of bias), we only see that on average going to college is associated with a 43% increase in earnings instead of 72%. Furthermore, looking at the 95% confidence interval for <span class="math notranslate nohighlight">\(\hat{\beta}_2\)</span>, we see that it does not contain 0, which would imply that AFQT score has a strong non-zero association with earnings.</p>
<p>These observations validate our claim that AFQT was probably an omitted variable causing <span class="math notranslate nohighlight">\(\hat{\beta}_1\)</span> to be biased. When interpreting <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> coefficients, you should always be mindful of potential sources of bias that could make your coefficients misleading and not useful from an econometric context.</p>
<p><strong>Note:</strong> A linear regression model makes predictions for <span class="math notranslate nohighlight">\(y\)</span> which we’ve been calling <span class="math notranslate nohighlight">\(\hat{y}\)</span>. If you imagine that you are the model and are tasked with predicting people’s earnings, you will almost certainly want more than just their years of schooling to make an accurate prediction. The more relevant variables you are given, the better predictions you are likely to make compared to just using one variable. The Variable needs to be relevant though; the day of the week a person was born on is probably not useful in predicting earnings. This is just another way of thinking about the usefulness of multivariable regression.</p>
<div class="section" id="visualizing-multivariable-regression">
<h3>Visualizing Multivariable Regression<a class="headerlink" href="#visualizing-multivariable-regression" title="Permalink to this headline">¶</a></h3>
<p>The 3D plots below show us our variables of interest and the regression plane from two different angles.</p>
<div class="cell tag_remove_input docutils container">
<div class="cell_output docutils container">
<img alt="../../_images/multivariable_11_0.png" src="../../_images/multivariable_11_0.png" />
</div>
</div>
<div class="cell tag_remove_input docutils container">
<div class="cell_output docutils container">
<img alt="../../_images/multivariable_12_0.png" src="../../_images/multivariable_12_0.png" />
</div>
</div>
<div class="cell tag_remove_input docutils container">
<div class="cell_output docutils container">
<img alt="../../_images/multivariable_13_0.png" src="../../_images/multivariable_13_0.png" />
</div>
</div>
<p>The regression plane, instead of the regression line, represents the values for log earnings that the regression model would predict for any given college and AFQT input. It’s a plane now because there are two possible inputs, as opposed to one.</p>
</div>
</div>
<div class="section" id="colinearity-and-dummy-variables">
<h2>Colinearity and Dummy Variables<a class="headerlink" href="#colinearity-and-dummy-variables" title="Permalink to this headline">¶</a></h2>
<p>When we do regression onto the variable <code class="docutils literal notranslate"><span class="pre">college</span></code>, why don’t we also include a variable that measures not going to college? In other words, why don’t we regress on college and the opposite of college so that way we can get an estimate of the average earnings of college-goers and non-college-goers. Why do we do this roundabout way of using the intercept term and a difference in means?</p>
<p>Imagine we have a dataset with a variable for college, a variable for not going to college, and the intercept term. The issue with this is that there is now redundant information.</p>
<p>Let’s look at just one element of the sample. Let’s say this person went to college, so this person’s features are the following:</p>
<ul class="simple">
<li><p>College = 1</p></li>
<li><p>Not College = 0</p></li>
<li><p>Intercept term = 1</p></li>
</ul>
<p>Clearly there is a redundancy here; you can guess one of the variables from the others. More specifically, by redundancy we mean that <em>one variable can be written as a linear combination of the other variables</em>. In fact, there are three different combinations:</p>
<ul class="simple">
<li><p>Intercept = College + Not College</p></li>
<li><p>Not College = Intercept - College</p></li>
<li><p>College = Intercept - Not College</p></li>
</ul>
<p>These equalities aren’t just true for this one person; they actually hold true for any possible person in the sample. This is because of the way we defined “college” and “not college”. You can’t simultaneously be in both, and so adding them together you get 1, which is just the intercept term.</p>
<p>In general, we have redundancy whenever we have <em>mutually exclusive</em> and <em>exhaustive</em> dummy variables in combination with an intercept term.</p>
<ul class="simple">
<li><p>Mutually exclusive: You cannot be in more than one dummy variable.</p></li>
<li><p>Exhaustive: You must be in at least one dummy variable.</p></li>
</ul>
<p>You can see that “college” and “not college” satisfy these conditions. So why is this redundancy an issue? It becomes ambiguous what the values for <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span>, <span class="math notranslate nohighlight">\(\hat{\beta}_1\)</span>, and <span class="math notranslate nohighlight">\(\hat{\beta}_2\)</span> should be in the model where we include all three terms:</p>
<div class="math notranslate nohighlight">
\[
\text{log earnings} = \hat{\alpha} + \hat{\beta}_1 \text{college} + \hat{\beta}_2 \text{not college}
\]</div>
<p>Consider a case where we expect people who went to college to have log earnings of 10 and those who did not go to college to have log earnings of 8. What values for <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> and <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span> make sense?</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\hat{\beta}_1 = 10\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\hat{\beta}_2 = 8\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\hat{\alpha} = 0\)</span></p></li>
</ul>
<p>make sense. These are valid values for <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> and <span class="math notranslate nohighlight">\(\hat{\alpha}\)</span> that satisfy the condition above. To see why, consider a person with college:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \cdot 1 + \hat{\beta}_2 \cdot 0 \\
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \\
\text{log earnings} &amp;= 0 + 10 = 10
\end{aligned}\end{split}\]</div>
<p>and a person without college:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \cdot 0 + \hat{\beta}_2 \cdot 1 \\
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_2 \\
\text{log earnings} &amp;= 0 + 8 = 8
\end{aligned}\end{split}\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\hat{\beta}_1 = 2\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\hat{\beta}_2 = 0\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\hat{\alpha} = 8\)</span></p></li>
</ul>
<p>also make sense. To see why, consider a person with college:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \cdot 1 + \hat{\beta}_2 \cdot 0 \\
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \\
\text{log earnings} &amp;= 8 + 2 = 10
\end{aligned}\end{split}\]</div>
<p>and a person without college:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_1 \cdot 0 + \hat{\beta}_2 \cdot 1 \\
\text{log earnings} &amp;= \hat{\alpha} + \hat{\beta}_2 \\
\text{log earnings} &amp;= 8 + 0 = 8
\end{aligned}\end{split}\]</div>
<p>It turns out, there are actually infinitely many solutions for <span class="math notranslate nohighlight">\(\hat{\beta}\)</span> that satisfy the condition where people who went to college have mean log earnings of 10 and people who did not go to college have mean log earnings of 8. This holds true for all situations where you regress on a constant and a set of mutually exclusive and exhaustive dummies. There is no unique solution for <span class="math notranslate nohighlight">\(\hat{\beta}\)</span>, which is a problem for econometricians who want unique and interpretable coefficients.</p>
<p>In fact, there is mathematical justification for this as well. At some point in the math involved in performing regression, having redundant variables causes a division by 0. This is particularly upsetting for your computer, and it will complain.</p>
<p>So how do we avoid this problem? We deliberately exclude one of the variables. It can technically either be one of the dummy variables or the intercept term, but we usually really want to have an intercept term present in our regression for other reasons. So we usually get rid of one of the dummy variables. Notice that we implicitly did this earlier. We did not include “not college” in our first regression.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/11-econometrics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="statsmodels.html" title="previous page">Using <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> for Regression</a>
    <a class='right-next' id="next-link" href="reading-econ-papers.html" title="next page">Reading Economics Papers</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Data 88 Course Staff<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>